<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Study Notes - CloudWatch Core Functions | Complete Think</title>
  <meta name="author" content="Rick Hwang">
  
  <meta name="description" content="CloudWatch 是學習 AWS 之後，除了 EC2、S3 之外，最重要的 Services 之一，本文整理 CloudWatch 主要的功能介紹。


核心功能CloudWatch Agent (取代 awslogs)新一代的 Log Ingest Agent，以 golang 重寫，整合 S">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Study Notes - CloudWatch Core Functions"/>
  <meta property="og:site_name" content="Complete Think"/>

  
    <meta property="og:image" content="undefined"/>
  

  
    <link rel="alternative" href="/atom.xml" title="Complete Think" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  

  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <!--
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
  -->
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-71839551-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;

ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';

var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>


  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '1554905741423841',
        xfbml      : true,
        version    : 'v2.2'
      });
    };

    (function(d, s, id){
       var js, fjs = d.getElementsByTagName(s)[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement(s); js.id = id;
       js.src = "//connect.facebook.net/en_US/sdk.js";
       fjs.parentNode.insertBefore(js, fjs);
     }(document, 'script', 'facebook-jssdk'));
  </script>

</head>


<body>

  
<nav id="main-nav" class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand active" href="/">Complete Think</a>

      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  	
		  		
		  			<li><a href="/archives" title="All the articles."><i class="fa fa-archive"></i>Archives</a></li>
		  		
		  	
		  		
					<li class='dropdown'>
						<a aria-expanded='false' class='dropdown-toggle' data-toggle='dropdown' href='#' role='button'><i class="fa fa-folder"></i>Categories <span class='caret'/></span></a>
		            	<ul class='dropdown-menu' role='menu'>
		            	
										<li><a href="/categories/AWS/">AWS <sup>73</sup></a></li>
									
										<li><a href="/categories/About/">About <sup>11</sup></a></li>
									
										<li><a href="/categories/Architecture/">Architecture <sup>10</sup></a></li>
									
										<li><a href="/categories/Blog/">Blog <sup>4</sup></a></li>
									
										<li><a href="/categories/Coding/">Coding <sup>2</sup></a></li>
									
										<li><a href="/categories/Computer-Science/">Computer Science <sup>2</sup></a></li>
									
										<li><a href="/categories/Container/">Container <sup>9</sup></a></li>
									
										<li><a href="/categories/DevOps/">DevOps <sup>29</sup></a></li>
									
										<li><a href="/categories/Architecture/Distributed-Systems/">Distributed Systems <sup>7</sup></a></li>
									
										<li><a href="/categories/GCP/">GCP <sup>8</sup></a></li>
									
										<li><a href="/categories/Linux/">Linux <sup>10</sup></a></li>
									
										<li><a href="/categories/Misc/">Misc <sup>3</sup></a></li>
									
										<li><a href="/categories/OS-X/">OS X <sup>3</sup></a></li>
									
										<li><a href="/categories/Redmine/">Redmine <sup>4</sup></a></li>
									
										<li><a href="/categories/Reference/">Reference <sup>4</sup></a></li>
									
										<li><a href="/categories/DevOps/SRE/">SRE <sup>19</sup></a></li>
									
										<li><a href="/categories/Software-Engineering/">Software Engineering <sup>5</sup></a></li>
									
										<li><a href="/categories/Thinking/">Thinking <sup>1</sup></a></li>
									
										<li><a href="/categories/經營管理/">經營管理 <sup>34</sup></a></li>
									
										<li><a href="/categories/軟體測試/">軟體測試 <sup>8</sup></a></li>
									
						</ul>
					</li>
		  		
		  	
			</ul>

			<!-- @ricka: menu in right -->
			<ul class='nav navbar-nav navbar-right'>
			
				<li><a href="http://www.gtcafe.com" title="GTCafe Studio" target="_blank"> <i class="fa fa-coffee"></i>GTCafe Studio</a></li>
			
				<li><a href="http://rickmidi.blogspot.com/" title="喝咖啡 聊音樂" target="_blank"> <i class="fa fa-coffee"></i>喝咖啡 聊音樂</a></li>
			
				<li><a href="https://rickhw.github.io/2017/12/29/About/About-This-Blog/" title="About me." target="_blank"> <i class="fa fa-user"></i>About</a></li>
			
			</ul>
			<!-- @ricka end -->
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
    <div class="content" style="background-color: white;">
       




	
		<!-- @rick, header of article -->
		<!-- original
		<div class="page-header">
			<h1> Study Notes - CloudWatch Core Functions</h1>
		</div>
		-->

		<div class="panel article_title">
			<div class="panel-heading">
    		<h1> Study Notes - CloudWatch Core Functions</h1>
  		</div>
		</div>

	



<div class="row post">
	<!-- cols -->
	
	<div class="col-md-9">
	

	

		<!-- content -->
		<div class="mypage">

			<!-- Facebook in front of page -->
			<div
			  class="fb-like"
			  data-share="true"
			  data-width="450"
			  data-show-faces="true">
			</div>

			<hr />

		    <p>CloudWatch 是學習 AWS 之後，除了 EC2、S3 之外，最重要的 Services 之一，本文整理 CloudWatch 主要的功能介紹。</p>
<a id="more"></a>
<hr>
<h1 id="核心功能"><a href="#核心功能" class="headerlink" title="核心功能"></a>核心功能</h1><h2 id="CloudWatch-Agent-取代-awslogs"><a href="#CloudWatch-Agent-取代-awslogs" class="headerlink" title="CloudWatch Agent (取代 awslogs)"></a>CloudWatch Agent (取代 awslogs)</h2><p>新一代的 Log Ingest Agent，以 golang 重寫，整合 SSM，同時支援 Linux &amp; Windows。</p>
<p>— 待整理 —</p>
<blockquote>
<p>詳細參閱：<a href="https://aws.amazon.com/blogs/aws/new-amazon-cloudwatch-agent-with-aws-systems-manager-integration-unified-metrics-log-collection-for-linux-windows/" target="_blank" rel="noopener">CloudWatch Agent with AWS Systems Manager Integration – Unified Metrics &amp; Log Collection for Linux &amp; Windows</a></p>
</blockquote>
<h2 id="awslogs-python"><a href="#awslogs-python" class="headerlink" title="awslogs (python)"></a>awslogs (python)</h2><p>Log 蒐集部分，需要在 EC2 Instance 安裝 agent，底下是快速安裝：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl https://s3.amazonaws.com/aws-cloudwatch/downloads/latest/awslogs-agent-setup.py -O</span><br><span class="line">chmod +x ./awslogs-agent-setup.py</span><br><span class="line">./awslogs-agent-setup.py -n -r ap-northeast-1 -c s3://&lt;bucket-name&gt;/awslogs.conf</span><br></pre></td></tr></table></figure>
<p>記得先在 s3 放一個 config 檔，或者直接執行安裝檔。</p>
<p>安裝好 awslogs agent，然後設定 Filename Pattern、Time Format、Log Group、Log Stream … 等，就會自動把 Log 傳到 CloudWatch Log，詳細設定：<a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/AgentReference.html" target="_blank" rel="noopener">CloudWatch Logs Agent Reference</a>。</p>
<p>底下是我蒐集 syslog + nginx 設定例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># see: http://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/AgentReference.html</span></span><br><span class="line">[general]</span><br><span class="line">state_file = /var/awslogs/state/agent-state</span><br><span class="line"></span><br><span class="line">[/var/<span class="built_in">log</span>/syslog]</span><br><span class="line">file = /var/<span class="built_in">log</span>/syslog</span><br><span class="line">log_group_name = /Worker/SysLog</span><br><span class="line">log_stream_name = &#123;instance_id&#125;_&#123;hostname&#125;</span><br><span class="line">datetime_format = %b %d %H:%M:%S</span><br><span class="line"></span><br><span class="line">[/var/<span class="built_in">log</span>/nginx/<span class="built_in">log</span>]</span><br><span class="line">file = /var/<span class="built_in">log</span>/nginx/*.<span class="built_in">log</span></span><br><span class="line">log_group_name = /Worker/Nginx</span><br><span class="line">log_stream_name = AccessLog</span><br><span class="line">datetime_format = %Y-%m-%dT%H:%M:%S%z</span><br><span class="line">time_zone = UTC</span><br></pre></td></tr></table></figure>
<p>配置 awslogs agent 要注意看 awslogs 自己的 log，確認他的解析是正確的。awslogs 的 log 放在 <code>/var/log/awslogs.log</code></p>
<p>Windows 則可以透過 Ec2Config 或者 <a href="/2016/10/25/AWS/EC2-Run-Command_SSM/">SSM</a> Windows 自身提供的 Event Logs、Performance Monitoring，或者其他應用程式的 Log ，像是 IIS、 SQLServer 等，傳上去 CloudWatch Log。詳細參閱 <a href="https://aws.amazon.com/blogs/devops/using-cloudwatch-logs-with-amazon-ec2-running-microsoft-windows-server/" target="_blank" rel="noopener">Using CloudWatch Logs with Amazon EC2 Running Microsoft Windows Server</a></p>
<h2 id="CloudWatch-Logs"><a href="#CloudWatch-Logs" class="headerlink" title="CloudWatch Logs"></a>CloudWatch Logs</h2><p>CloudWatch 除了自身提供的 Metric / Alarm ，也可以把自己 Application 的 Log 丟上來、儲存，然後設定 Filter 進行分析，變成 Metric，最後用 Alarm + Rule 驅動事件。</p>
<h2 id="CloudWatch-Metrics"><a href="#CloudWatch-Metrics" class="headerlink" title="CloudWatch Metrics"></a>CloudWatch Metrics</h2><p>Metrics 可以說成 <code>監控指標項目</code>， AWS 各個服務預設很多監控指標，可以在 CloudWatch 上看到相關數據，也可以透過 AWS CLI or SDK 取得數據。要取得 CloudWatch 資料，就要先了解 CloudWatch Metrics 的設計與資料結構：</p>
<ul>
<li><code>Namespace</code>s: Metrics 的容器 (Container), 就是用來分類 AWS 服務的, 用 slash <code>/</code> 區隔. 像是 <code>AWS/EC2</code>, <code>AWS/DynamoDB</code>. 詳細參閱 <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/aws-namespaces.html" target="_blank" rel="noopener">AWS Namespaces</a>.</li>
<li><code>Metrics</code>: 意思是 <code>度量</code>, 是一個時間軸 (time-base) 的資料集合. 像是 ELB 的 <code>HealthyHostCount</code>, <code>RequestCount</code>, <code>SurgeQueueLength</code> 都叫做 Metrics.</li>
<li><code>Dimensions</code>: 量測的資源對象 (ARN)，是 Key/Value 呈現，像是 <code>Name=InstanceId,Value=${INSTANCE_ID}</code>, <code>Name=LoadBalancerName,Value=${ARN_ID}</code></li>
<li><code>Statistics</code>: 時間範圍之內的統計方式，包含了：Sum, Minimum, Maximum, and SampleCount.</li>
</ul>
<h3 id="Metric-Filter"><a href="#Metric-Filter" class="headerlink" title="Metric Filter"></a>Metric Filter</h3><p>Metric Filter 是 CloudWatch Log 中重要的功能，透過 Metric Filter 可以定義自己的 Metric，進而變成 Alarm 或者呈現 Dashboard，他有點像是 ELK 的 Logstash 的角色，主要就是把欄位做對應以及過濾。</p>
<p>底下是我透過 AWS CLI 建立 Metric Filter 處理 Nginx Log 的例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">FILTER_NAME=<span class="string">"Connection-Request_Filter"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 過濾 local health check</span></span><br><span class="line">FILER_PATTERN=<span class="string">"[time_iso8601, remote_user, status, body_bytes_sent, http_referer, server_name != 127.0.0.1, upstream_addr, request, request_length, http_user_agent, remote_addr, proxy_protocol_addr, http_x_forwarded_for, proxy_add_x_forwarded_for, request_time, http_host, scheme, msec, connection, connection_requests, connections_active, connections_reading, connections_writing, connections_waiting]"</span></span><br><span class="line"></span><br><span class="line">aws logs put-metric-filter \</span><br><span class="line">  --<span class="built_in">log</span>-group-name <span class="string">"<span class="variable">$&#123;LOG_GROUP_NAME&#125;</span>"</span> \</span><br><span class="line">  --filter-name <span class="string">"<span class="variable">$&#123;FILTER_NAME&#125;</span>"</span> \</span><br><span class="line">  --filter-pattern <span class="string">"<span class="variable">$&#123;FILER_PATTERN&#125;</span>"</span> \</span><br><span class="line">  --metric-transformations metricName=Connection-Active,metricNamespace=Nginx/Connection-Request,metricValue=1,defaultValue=0.0</span><br></pre></td></tr></table></figure>
<p>如果上傳的 Log 是 JSON，Metric Filter 也支援，他的寫法大概長得像這樣：</p>
<p>這是查詢 Cloudtrail Event 的 Metric Filter：有人開了 <code>*.8xlarge</code> or <code>*.4xlarge</code> 的機器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; ($.eventName = RunInstances) &amp;&amp; (($.requestParameters.instanceType = *.8xlarge) || ($.requestParameters.instanceType = *.4xlarge)) &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Custom-Metrics"><a href="#Custom-Metrics" class="headerlink" title="Custom Metrics"></a>Custom Metrics</h3><p>有一些資訊 CloudWatch 本身是不提供的，像是 EC2 Instance 的記憶體、磁碟使用空間 (Disk Usage Percent)，或者是自己的 Application Servers 像是 Nginx、Tomcat、IIS、Node.js … 需要監控這些 Servers 的相關數據，像是 Nginx 的記憶體使用例、Connection Request、Tomcat 的 JVM HeapSize … 等。那麼就要自行蒐集相關資料、儲存這些資料。</p>
<blockquote>
<p>參考：<a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/mon-scripts.html" target="_blank" rel="noopener">Monitoring Memory and Disk Metrics for Amazon EC2 Linux Instances</a></p>
</blockquote>
<p>如果是要從自己的 Log 分析出相關資訊，就要透過 CloudWatch Log + Filter 建立自己的 Metric，同樣的這也是 Custom Metrics。像 Nginx or JVM HeapSize 就可以這樣做。</p>
<p>使用 Custom Metrics 要注意怎麼設計 <code>Namespaces</code>, <code>Dimensions</code>，例如依照機器角色分 Namespace，依照角色 Metric 分 Dimension，依照商業邏輯把相關的放一起，日後好整理。</p>
<blockquote>
<p>Custom Metrics 不能透過 AWS Console or CLI 刪除，只能等它自己慢慢消失 ..</p>
</blockquote>
<h3 id="取得-Metrics-的-DataPoint"><a href="#取得-Metrics-的-DataPoint" class="headerlink" title="取得 Metrics 的 DataPoint"></a>取得 Metrics 的 DataPoint</h3><p>有時候需要自行分析 CloudWatch Metric 的數據，或者重新 Aggregation ，例如：</p>
<blockquote>
<p>計算一群機器的平均 CPU Utilization，然後平均之後決定是否驅動事件，像是透過 SNS 通知</p>
</blockquote>
<p>以下是用 AWS CLI 透過 crontab 固定取得 metric 的例子。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">AWS_PROFILE=<span class="string">"&lt;&lt;AWS-PROFILE&gt;&gt;"</span></span><br><span class="line">INSTANCE_ID=<span class="string">"&lt;&lt;EC2-INSTNACE-ID&gt;&gt;"</span></span><br><span class="line">AWS_REGION=<span class="string">"ap-northeast-1"</span></span><br><span class="line">OUTPUT_TYPE=<span class="string">"text"</span></span><br><span class="line">period=300</span><br><span class="line"></span><br><span class="line"><span class="comment"># Calculate local time as UTC, there is local time -8 = UTC. my server is local time (UTC+8).</span></span><br><span class="line">start_time=`date +<span class="string">'%Y-%m-%dT%H:%M:00'</span> --date=<span class="string">'-8 hour -10 min'</span>`</span><br><span class="line">end_time=`date +<span class="string">'%Y-%m-%dT%H:%M:00'</span> --date=<span class="string">'-8 hour'</span>`</span><br><span class="line"></span><br><span class="line">aws cloudwatch get-metric-statistics \</span><br><span class="line">    --metric-name CPUUtilization \</span><br><span class="line">    --start-time <span class="variable">$&#123;start_time&#125;</span> \</span><br><span class="line">    --end-time <span class="variable">$&#123;end_time&#125;</span> \</span><br><span class="line">    --period <span class="variable">$&#123;period&#125;</span> \</span><br><span class="line">    --namespace AWS/EC2 \</span><br><span class="line">    --statistics Average \</span><br><span class="line">    --dimensions Name=InstanceId,Value=<span class="variable">$&#123;INSTANCE_ID&#125;</span> \</span><br><span class="line">    --output <span class="variable">$&#123;OUTPUT_TYPE&#125;</span> \</span><br><span class="line">    --region <span class="variable">$&#123;AWS_REGION&#125;</span> \</span><br><span class="line">    --profile <span class="variable">$&#123;AWS_PROFILE&#125;</span></span><br></pre></td></tr></table></figure>
<p>Return as text</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CPUUtilization</span><br><span class="line">DATAPOINTS	30.24	2016-07-11T06:00:00Z	Percent</span><br><span class="line">DATAPOINTS	34.034	2016-07-11T06:05:00Z	Percent</span><br></pre></td></tr></table></figure>
<p>Return as json:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"Datapoints"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"Timestamp"</span>: <span class="string">"2016-07-11T06:00:00Z"</span>,</span><br><span class="line">            <span class="string">"Average"</span>: 30.240000000000002,</span><br><span class="line">            <span class="string">"Unit"</span>: <span class="string">"Percent"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"Timestamp"</span>: <span class="string">"2016-07-11T06:05:00Z"</span>,</span><br><span class="line">            <span class="string">"Average"</span>: 34.034000000000006,</span><br><span class="line">            <span class="string">"Unit"</span>: <span class="string">"Percent"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"Label"</span>: <span class="string">"CPUUtilization"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>這邊要去深入了解每個 <code>Unit</code>, <code>Statistics</code> 以及 <code>Period</code> 等意義是什麼，才能計算出需要的東西。</p>
<blockquote>
<p>處理統計資料，通常要過濾很多不必要的資訊，AWS CLI 可以配合 <a href="http://jmespath.org/" target="_blank" rel="noopener">JEMSPath</a> 找到要的欄位，透過 <code>--query</code> 過濾不必要的資訊，詳細參閱 <a href="/2016/08/03/AWS/Ops-as-Code-with-AWSCLI/">Ops as Code with AWS CLI</a> 的例子。</p>
</blockquote>
<h2 id="CloudWatch-Logs-Insights"><a href="#CloudWatch-Logs-Insights" class="headerlink" title="CloudWatch Logs Insights"></a>CloudWatch Logs Insights</h2><p>2018/11/27 AWS re:Invent 發表。</p>
<p>透過查詢語言，聚合複雜的查詢內容。</p>
<p>— 待整理 —</p>
<blockquote>
<p>詳細參閱：<a href="https://aws.amazon.com/blogs/aws/new-amazon-cloudwatch-logs-insights-fast-interactive-log-analytics/" target="_blank" rel="noopener">New – Amazon CloudWatch Logs Insights – Fast, Interactive Log Analytics</a></p>
</blockquote>
<h2 id="CloudWatch-Dashboard"><a href="#CloudWatch-Dashboard" class="headerlink" title="CloudWatch Dashboard"></a>CloudWatch Dashboard</h2><ul>
<li>自行定義 Dashboard，也就是把很多圖放在同一個畫面，版面配置可以自行調整大小。</li>
<li>資訊是即時的 (1-2 分鐘的時間差)</li>
<li>並且自動更新。同時可以設定時間範圍</li>
<li>支援 Local Time。</li>
<li>支援 export / import as JSON，也可以程式化、版控、分享 Dashboard 的設定。2017/07/05: <a href="https://aws.amazon.com/blogs/aws/new-api-cloudformation-support-for-amazon-cloudwatch-dashboards/" target="_blank" rel="noopener">New – API &amp; CloudFormation Support for Amazon CloudWatch Dashboards</a></li>
</ul>
<p>非常實用的功能！</p>
<p>缺點：</p>
<ul>
<li>圖形支援的還不夠多</li>
</ul>
<p>成本：一個 Dashboard 每個月三塊美金。</p>
<h3 id="Metric-Math"><a href="#Metric-Math" class="headerlink" title="Metric Math"></a>Metric Math</h3><p>多個 Metric 可以用數學函示即時計算出另一個 Metric。詳細參閱：</p>
<p>— 待整理 —</p>
<ul>
<li><a href="https://aws.amazon.com/blogs/mt/amazon-cloudwatch-metric-math-simplifies-near-real-time-monitoring-of-your-amazon-efs-file-systems-and-more/" target="_blank" rel="noopener">Amazon CloudWatch Metric Math simplifies near real-time monitoring</a></li>
<li><a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/using-metric-math.html" target="_blank" rel="noopener">Use Metric Math</a></li>
</ul>
<h2 id="CloudWatch-Alarms"><a href="#CloudWatch-Alarms" class="headerlink" title="CloudWatch Alarms"></a>CloudWatch Alarms</h2><p>使用 AWS 剛開始都會用到的，主要目的：</p>
<ul>
<li>就針對特定的監控指標</li>
<li>設定告警的條件</li>
<li>通知或者說驅動一個事件</li>
</ul>
<p>最常見的例子：</p>
<ul>
<li>設定監控指標：CPU Utilization</li>
<li>告警條件：五分鐘之內，持續 2 次，平均值超過 80%</li>
<li>發動 SNS 事件<ul>
<li>發 Email 給一個群組</li>
<li>送簡訊 (SMS) 給 1-n 個人</li>
<li>執行 1-N 個 Lambda</li>
</ul>
</li>
</ul>
<p>這是非常經典的例子。</p>
<p>使用 Alarms 要知道幾個重要的觀念，包含 <code>Namespaces</code>, <code>Metric Name</code>, <code>Statistics</code>, <code>Unit</code>, <code>Period</code> …  後面 Metric 詳細描述。</p>
<hr>
<h1 id="其他功能"><a href="#其他功能" class="headerlink" title="其他功能"></a>其他功能</h1><h2 id="CloudWatch-Events-Rules"><a href="#CloudWatch-Events-Rules" class="headerlink" title="CloudWatch Events / Rules"></a>CloudWatch Events / Rules</h2><p>主要用來事件驅動 (Event Driven) 的原點，像是 CloudWatch Alarms 發生時，驅動 Lambda 做一件事情。也可以利用固定的排程 (crontab) 做固定的事情，像是每天固定幾點做什麼事情，或者固定每 10 分鐘做一件事情。這樣事件驅動叫做 <code>CloudWatch Event</code>，觸發的每個規則稱為 <code>CloudWatch Rule</code>。</p>
<p>這些都可以透過 CLI or SDK 做設定，所以很容易開發。</p>
<p>事件驅動了來源有很多地方，CloudWatch Rule 基本的就有：</p>
<ul>
<li>Schedule: Cron 的方式，或者是固定的時間驅動</li>
<li><a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/events/EventTypes.html" target="_blank" rel="noopener">CloudWatch Events</a>: 配合 AWS Service 的 Action，像是:<ul>
<li>當某些重要的 EC2 狀態變成 <code>stopped</code> or <code>shutting-down</code> 時<ul>
<li>驅動一個 Lambda，通知 ooxx</li>
<li>同時 Reboot 自己</li>
</ul>
</li>
<li>有東西放到 S3 就去跑 Lambda …</li>
<li>支援東西很多，像是 EC2, EC2 SSM, ECS, EMR, Auto Scaling, API Call, CodeDeploy, KMS …  等等</li>
</ul>
</li>
</ul>
<p>在做系統監控的時候，常常需要知道現在的系統狀況，但是身邊也不見得隨時都會有電腦，因為這樣的需求所以我設計了 <code>CloudWatch Reporter</code>，透過 CloudWatch Event Rule ，定期把資訊丟到 Slack，讓大家隨時可以掌握系統狀況。</p>
<p>實作很簡單，就是寫一個 Lambda Function 撈 CloudWatch 時間範圍的資料，做簡單計算，組 Slack Payload，丟 Slack。</p>
<h2 id="CloudWatch-相關的服務"><a href="#CloudWatch-相關的服務" class="headerlink" title="CloudWatch 相關的服務"></a>CloudWatch 相關的服務</h2><p>CloudWatch 跟很多東西都有關係，以下整理一些東西：</p>
<ul>
<li><code>Cloudtrail</code>：可以把 Cloudtrail event 倒進去 CloudWatch Log ，透過官方提供的 CloudFormation 可以自動建立所有的 Metric Filer / Alarm，可以監控不正常的 AWS Event</li>
<li><code>Elasticsearch</code>：可以直接 Log 倒入 AWS ES，但我不太喜歡養機器 … 即使 AWS ES 宣稱是 Managed …</li>
<li><code>Lambda</code>：串接 CloudWatch Rules，最常用的組合，配合 Slack 口味不錯。</li>
<li><code>SNS</code>：同上</li>
<li><code>VPC Flow Log</code>：用來分析網路流量，參閱 <a href="/2016/10/10/AWS/Migrate-to-AWS-NAT-Gateway/">Migrate to AWS NAT Gateway</a> 和 <a href="/2016/08/27/AWS/Lambda-Network-Traffic-Test-in-VPC-with-Endpoint/">Lambda Network Traffic Test in VPC w/ or w/o Endpoint</a> 的分享。</li>
<li><code>Kineses Firehose</code>: 串流 Log，讓 Log 落地到 S3 或者與其他資料分析。</li>
<li>Auto Scaling / SQS / SES / SWF / DynamoDB / RDS … 幾乎都會跟 CloudWatch 有關。</li>
<li>把 ELB Log 倒入 CloudWatch Log 分析：<ul>
<li><a href="https://github.com/awslabs/cloudwatch-logs-centralize-logs" target="_blank" rel="noopener">cloudwatch-logs-centralize-logs</a></li>
</ul>
</li>
</ul>
<hr>
<h1 id="延伸閱讀"><a href="#延伸閱讀" class="headerlink" title="延伸閱讀"></a>延伸閱讀</h1><h2 id="系列文章"><a href="#系列文章" class="headerlink" title="系列文章"></a>系列文章</h2><ul>
<li><a href="/2017/03/02/AWS/Study-Notes-CloudWatch/">Study Notes - CloudWatch</a></li>
<li><a href="/2017/03/02/AWS/Study-Notes-CloudWatch-Core-Functions/">Study Notes - CloudWatch Core Functions</a></li>
<li><a href="/2017/03/06/AWS/Study-Notes-CloudWatch-FAQ/">Study Notes - CloudWatch FAQ</a></li>
<li><a href="/2017/03/03/AWS/Study-Notes-CloudWatch-for-Monitoring-and-Alarm/">Solution - CloudWatch for Monitoring and Alarm Systems</a></li>
<li><a href="/2017/03/04/AWS/Study-Notes-CloudWatch-for-Log-Analysis/">Solution - CloudWatch for Log Analysis</a></li>
<li><a href="/2017/03/05/AWS/Study-Notes-CloudWatch-for-Pofrmance-Testing/">Solution - CloudWatch for Performance Testing</a></li>
<li>2017/06/21: <a href="/2017/06/21/AWS/Stategies-System-Monitor_and_CloudWatch/">淺談系統監控與 CloudWatch 的應用 - AWS User Group Taiwan</a></li>
</ul>
<h2 id="站內延伸"><a href="#站內延伸" class="headerlink" title="站內延伸"></a>站內延伸</h2><ul>
<li><a href="/2016/07/29/AWS/AWS-Certified-SysOps-Administrator/">AWS Certified SysOps Administrator - Associate 準備心得</a></li>
<li><a href="/2016/08/03/AWS/Ops-as-Code-with-AWSCLI/">Ops as Code with AWS CLI</a></li>
<li><a href="/2016/10/25/AWS/EC2-Run-Command_SSM/">EC2 Run Command and SSM Agent</a></li>
<li><a href="/2016/10/10/AWS/Migrate-to-AWS-NAT-Gateway/">Migrate to AWS NAT Gateway</a></li>
<li><a href="/2016/08/27/AWS/Lambda-Network-Traffic-Test-in-VPC-with-Endpoint/">Lambda Network Traffic Test in VPC w/ or w/o Endpoint</a></li>
<li><a href="/2017/02/11/AWS/Resource-Provisioning-and-DevOps/">Resource Provisioning and DevOps</a></li>
<li><a href="/2016/02/21/AWS/Study-Notes-VPC/">Study Notes - AWS VPC (Virtual Private Cloud)</a></li>
<li><a href="/2014/05/09/SQA/Problems_In-Software-Autotest/">軟體自動化測試常見的問題</a></li>
<li><a href="/2017/03/18/SQA/Stages-In-Software-Testing/">Stages in Software Testing</a></li>
<li><a href="/2018/03/29/About/2018-Serverless-All-Star/">Ops as Code using Serverless</a></li>
<li><a href="/2016/10/01/AWS-Study-Roadmap/">AWS Study Roadmap</a></li>
</ul>
<h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ul>
<li><a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/WhatIsCloudWatch.html" target="_blank" rel="noopener">Amazon CloudWatch » Developer Guide</a></li>
<li><a href="https://aws.amazon.com/cloudwatch/faqs/?nc1=h_ls" target="_blank" rel="noopener">Amazon CloudWatch FAQs</a></li>
<li><a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/CW_Support_For_AWS.html" target="_blank" rel="noopener">Amazon CloudWatch Namespaces, Dimensions, and Metrics Reference</a></li>
<li><a href="http://jayendrapatil.com/cloudwatch-monitoring-supported-aws-services/" target="_blank" rel="noopener">CloudWatch Monitoring Supported AWS Services</a></li>
<li><a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/mon-scripts.html" target="_blank" rel="noopener">Monitoring Memory and Disk Metrics for Amazon EC2 Linux Instances</a></li>
<li><a href="https://aws.amazon.com/blogs/devops/using-cloudwatch-logs-with-amazon-ec2-running-microsoft-windows-server/" target="_blank" rel="noopener">Using CloudWatch Logs with Amazon EC2 Running Microsoft Windows Server</a></li>
<li>2017/07/05: <a href="https://aws.amazon.com/blogs/aws/new-api-cloudformation-support-for-amazon-cloudwatch-dashboards/" target="_blank" rel="noopener">New – API &amp; CloudFormation Support for Amazon CloudWatch Dashboards</a></li>
<li>2017/12/14: <a href="https://aws.amazon.com/blogs/aws/new-amazon-cloudwatch-agent-with-aws-systems-manager-integration-unified-metrics-log-collection-for-linux-windows/" target="_blank" rel="noopener">New – Amazon CloudWatch Agent with AWS Systems Manager Integration – Unified Metrics &amp; Log Collection for Linux &amp; Windows</a></li>
<li>2018/04/04: <a href="https://aws.amazon.com/blogs/mt/amazon-cloudwatch-metric-math-simplifies-near-real-time-monitoring-of-your-amazon-efs-file-systems-and-more/" target="_blank" rel="noopener">Amazon CloudWatch Metric Math simplifies near real-time monitoring of your Amazon EFS file systems and more</a></li>
<li>2018/12/27: <a href="https://aws.amazon.com/blogs/aws/new-amazon-cloudwatch-logs-insights-fast-interactive-log-analytics/" target="_blank" rel="noopener">New – Amazon CloudWatch Logs Insights – Fast, Interactive Log Analytics</a></li>
</ul>
<ul>
<li><a href="https://www.youtube.com/watch?v=-D4v2uK3YCw&amp;t=2426s" target="_blank" rel="noopener">AWS Summit 2016: Big Data Architectural Patterns and Best Practices</a></li>
</ul>
<h2 id="更新紀錄"><a href="#更新紀錄" class="headerlink" title="更新紀錄"></a>更新紀錄</h2><ul>
<li>2018/12/25: 從 <a href="/2017/03/02/AWS/Study-Notes-CloudWatch/">Study Notes - CloudWatch</a> 解構</li>
</ul>


		    <hr />
			<!-- Facebook in bend of page -->
			<div
			  class="fb-like"
			  data-share="true"
			  data-width="450"
			  data-show-faces="true">
			</div>

		</div>


		<div>
		  	<center>
				
<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/2017/03/03/AWS/Study-Notes-CloudWatch-for-Monitoring-and-Alarm/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/2017/03/02/AWS/Study-Notes-CloudWatch/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

	    	</center>
		</div>


	<!-- comment -->
	
<section id="comment">
  <h2 class="title">Comments</h2>

	<!-- @rick add for facebook -->
	<div class='fb-comments' data-num-posts='10' data-width='100%' expr:href='data:post.url'/>

  


</section>






	</div> <!-- col-md-9/col-md-12 -->

	
		<!-- meta in right -->
		<div class="col-md-3">

	<!-- date -->
	
	<div class="meta-widget">
		<i class="fa fa-clock-o"></i>
		2017/03/02 03:30:00
	</div>
	

	<hr />

	<!-- toc -->
	<div class="meta-widget">
	
	   <a data-toggle="collapse" data-target="#toc"><i class="fa fa-bars"></i> Table of Content</a>
	   <div id="toc" class="toc collapse in">
				<ol class="toc-article"><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#核心功能"><span class="toc-article-text">核心功能</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#CloudWatch-Agent-取代-awslogs"><span class="toc-article-text">CloudWatch Agent (取代 awslogs)</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#awslogs-python"><span class="toc-article-text">awslogs (python)</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#CloudWatch-Logs"><span class="toc-article-text">CloudWatch Logs</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#CloudWatch-Metrics"><span class="toc-article-text">CloudWatch Metrics</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Metric-Filter"><span class="toc-article-text">Metric Filter</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Custom-Metrics"><span class="toc-article-text">Custom Metrics</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#取得-Metrics-的-DataPoint"><span class="toc-article-text">取得 Metrics 的 DataPoint</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#CloudWatch-Logs-Insights"><span class="toc-article-text">CloudWatch Logs Insights</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#CloudWatch-Dashboard"><span class="toc-article-text">CloudWatch Dashboard</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Metric-Math"><span class="toc-article-text">Metric Math</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#CloudWatch-Alarms"><span class="toc-article-text">CloudWatch Alarms</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#其他功能"><span class="toc-article-text">其他功能</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#CloudWatch-Events-Rules"><span class="toc-article-text">CloudWatch Events / Rules</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#CloudWatch-相關的服務"><span class="toc-article-text">CloudWatch 相關的服務</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#延伸閱讀"><span class="toc-article-text">延伸閱讀</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#系列文章"><span class="toc-article-text">系列文章</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#站內延伸"><span class="toc-article-text">站內延伸</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#參考資料"><span class="toc-article-text">參考資料</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#更新紀錄"><span class="toc-article-text">更新紀錄</span></a></li></ol></li></ol>
		</div>
	
	</div>

	<hr />

	<!-- categories -->
  
	<div class="meta-widget">
		<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i> Categories</a>
    <!--<ul id="categorys" class="tag_box list-unstyled collapse in">-->
      <div>
  <!--<li>-->
    <span class="label label-info"><a href="/categories/AWS/" style="color: white">AWS <span class="badge">73</span></a></span>
  <!--</li>-->
</div>
    <!--</ul>-->
	</div>
	

	<hr />

	<!-- tags -->
	
	<div class="meta-widget">
		<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"> Tags</i></a>
    <!--<ul id="tags" class="tag_box list-unstyled collapse in">-->
    <div>
	  	
  <span class="label label-success"><a href="/tags/CloudWatch/" style="color: white">CloudWatch <span class="badge">24</span></a></span> <span class="label label-success"><a href="/tags/DevOps/" style="color: white">DevOps <span class="badge">22</span></a></span> <span class="label label-success"><a href="/tags/Lambda/" style="color: white">Lambda <span class="badge">13</span></a></span> <span class="label label-success"><a href="/tags/CloudWatch-Metrics/" style="color: white">CloudWatch Metrics <span class="badge">6</span></a></span> <span class="label label-success"><a href="/tags/CloudWatch-Logs/" style="color: white">CloudWatch Logs <span class="badge">7</span></a></span> <span class="label label-success"><a href="/tags/CloudWatch-Alarms/" style="color: white">CloudWatch Alarms <span class="badge">5</span></a></span> <span class="label label-success"><a href="/tags/CloudWatch-Events/" style="color: white">CloudWatch Events <span class="badge">5</span></a></span> <span class="label label-success"><a href="/tags/Log/" style="color: white">Log <span class="badge">5</span></a></span> <span class="label label-success"><a href="/tags/Athena/" style="color: white">Athena <span class="badge">3</span></a></span>
	  </div>
    <!--</ul>-->
	</div>
	


  <hr />

	<div class="meta-widget">
			<h4>About</h4>
			<!-- v4 -->
			
				<li><a href="/2018/07/08/Index/">全站索引</a></li>
			
				<li><a href="/2017/12/29/About/About-This-Blog/">關於這裏</a></li>
			
				<li><a href="/2017/12/29/About/About-Author/">關於作者</a></li>
			
				<li><a href="/2017/09/20/About/Learning-Approaches/">學習法則</a></li>
			
				<li><a href="/2014/12/27/Management/經營之道/">經營之道</a></li>
			
				<li><a href="/2017/12/02/About/Epiphany/">一些領悟</a></li>
			
				<li><a href="/2014/10/26/Management/Classified-Philosophy/">分類哲學</a></li>
			

			<!-- v3 -->
			<!--
			<li><a href="/2018/07/08/Index/">部落格索引</a></li>
			<li><a href="/2017/12/29/About/About-This-Blog/">關於這個部落格</a></li>
			<li><a href="/2017/12/29/About/About-Author/">關於作者</a></li>
			<li><a href="/2017/09/20/About/Learning-Approaches/">學習法則</a></li>
			<li><a href="/2014/12/27/Management/經營之道/">經營之道</a></li>
			<li><a href="/2017/12/02/About/Epiphany/">一些領悟</a></li>
			-->

			<!-- v2 -->
			<!-- <a href="/2017/07/01/Management/Developer-or-Engineer/">軟體開發者 (Software Developer)</a>、<a href="http://rickmidi.blogspot.com/">音樂愛好者</a>，工作角色經歷 DevOps 三個圈圈職務: Dev / <a href="/categories/軟體測試/">QA</a> / <a href="/categories/DevOps/">Ops</a>。這幾年專注在經營管理、<a href="/2016/10/01/AWS-Study-Roadmap/">AWS</a> / GCP、分散式架構、<a href="/categories/DevOps/">維運、DevOps / SRE</a> 等領域，並活躍於各大社群的活動、演講，著有技術部落格：<a href="https://rickhw.github.io/">Complete Think</a>。工作之外也是業餘音樂愛好者，專注在 吉他、鍵盤、編曲、教學，著有音樂部落格：<a href="https://rickmidi.blogspot.com/">喝咖啡聊音樂</a>。 -->

			<!-- v1 -->
			<!--
			<li>Software Developer</li>
			<li><a href="/categories/軟體測試/">SQA Manager</a></li>
			<li><a href="/categories/DevOps/">Operation Manager</a></li>
			<li><a href="http://rickmidi.blogspot.com/">Musician and Guitarist</a></li>
			<li>
				<ol>
					<li>Management</li>
					<li>Cloud / Distributed Systems</li>
					<li>DevOps / SRE / </li>
				</ol>
			</li>
			-->

			<h4>AWS Certifications</h4>
			<a href="/2016/04/22/AWS/AWS-Certified-Solutions-Architect_Associate/"><img src="/images/About/Solutions_Architect-Associate.jpg"></a>
			<a href="/2016/07/29/AWS/AWS-Certified-SysOps-Administrator/"><img src="/images/About/SysOps-Administrator-Associate.png"></a>
			<a href="/2016/08/20/AWS/AWS-Certified-Developer/"><img src="/images/About/Developer-Associate.png"></a>
	</div>

	<hr />
</div><!-- col-md-3 -->

	
	

</div><!-- row -->



    </div>
  </div>


<div class="container-narrow">
    <footer> <p>
  &copy; 2019 Rick Hwang
  
      with help from <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme base on <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->

<div id="gotop">
  <!--
  
    <i class="fa fa-coffee"></i> <a href="http://www.gtcafe.com" title="GTCafe Studio" target="_blank"]);">GTCafe Studio</a><br />
  
    <i class="fa fa-coffee"></i> <a href="http://rickmidi.blogspot.com/" title="喝咖啡 聊音樂" target="_blank"]);">喝咖啡 聊音樂</a><br />
  
    <i class="fa fa-user"></i> <a href="https://rickhw.github.io/2017/12/29/About/About-This-Blog/" title="About me." target="_blank"]);">About</a><br />
  
  -->

<a href="#"><span>▲</span></a>
</div>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/gtcafe-tracking.js"></script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);

// GTCafe API: completet
tracking_update();
</script>



</body>
</html>
